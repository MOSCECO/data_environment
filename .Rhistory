length(occ)
source("~/Documents/mosceco/r_projects/MOSCECO_L2/data_environment/scripts/boot.R", echo=TRUE)
length(occ)
# aggrégation de toutes les occurrences
O <- do.call(rbind, lapply(occ, do.call, rbind))
# aggrégation de toutes les occurrences
O <- do.call(rbind, lapply(occ, do.call, ... =rbind))
# aggrégation de toutes les occurrences
O <- do.call(rbind, lapply(occ, do.call, `rbind`))
lapply(occ, do.call, rbind)
# aggrégation de toutes les occurrences
O <- do.call(rbind, lapply(occ, \(l) do.call(rbind, l)))
dim(O)
View(O)
ggplot() + geom_sf(data = O)
st_bbox(O)
bb <- c(xmin = -140, ymin = -60, ymax = 60, xmax = 65) %>% st_bbox()
bb
names(O)
O2 <- O %>% cbind(id = 1:nrow(O))
bb <- c(xmin = -140, ymin = -60, ymax = 60, xmax = 65) %>% st_bbox()
O2 <- st_crop(O2, bb)
dim(O)
dim(O2)
O2 <- O %>% cbind(id = 1:nrow(O))
O2 <- sf::st_crop(O2, bb)
dim(O2)
?sf::st_crop
st_bbox(O)
bb <- c(xmin = -125, ymin = -60, ymax = 60, xmax = 65) %>% st_bbox()
bb
st_bbox(O2)
dim(O2)
# aggrégation de toutes les occurrences
O <- do.call(rbind, lapply(occ, \(l) do.call(rbind, l)))
O2 <- O %>% cbind(id = 1:nrow(O))
dim(O2)
bb <- c(xmin = -125, ymin = -60, ymax = 60, xmax = 65) %>% st_bbox()
O3 <- sf::st_crop(O2, bb)
dim(O3)
O2
st_crs(O2)
st_crs(bb)
st_crs(bb) <- st_crs(O2)
bb
O3 <- sf::st_crop(O2, bb)
O3
dim(O3)
View(O3)
ggplot() + geom_sf(data = O) + geom_sf(data = O3, col = "red
")
ggplot() + geom_sf(data = O) + geom_sf(data = O3, col = "red")
st_bbox(O3)
# aggrégation de toutes les occurrences
O <- do.call(rbind, lapply(occ, \(l) do.call(rbind, l)))
bb <- c(xmin = -125, ymin = -60, ymax = 60, xmax = 65) %>% st_bbox()
st_crs(bb) <- st_crs(O2)
O2 <- sf::st_crop(O, bb)
View(O2)
O2$occurrenceID
which(O2$occurrenceID %in% O$occurrenceID)
which(O$occurrenceID %in% O2$occurrenceID)
O <- O[-which(O$occurrenceID %in% O2$occurrenceID), ]
dim(O)
ggplot() + geom_sf(data = O)
# profondeurs
gebc0 <- rast(
here("data", "gebco", "gebco_2023_n60.0_s-60.0_w-140.0_e-20.0.tif")
)
# profondeurs
gebc0 <- rast(
here("data", "raw", "gebco", "gebco_2023_n60.0_s-60.0_w-140.0_e-20.0.tif")
)
# profondeurs
gebc0 <- rast(
here("data", "raw", "gebco", "gebco_2023_n60.0_s-60.0_w-140.0_e-20.0.tif")
)
gebc1 <- rast(
here("data", "raw", "gebco", "gebco_2023_n60.0_s-60.0_w-20.0_e65.0.tif")
)
gebco <- terra::mosaic(gebc0, gebc1)
gebco
# profondeurs
gebc0 <- read_stars(
here("data", "raw", "gebco", "gebco_2023_n60.0_s-60.0_w-140.0_e-20.0.tif")
)
gebc1 <- read_stars(
here("data", "raw", "gebco", "gebco_2023_n60.0_s-60.0_w-20.0_e65.0.tif")
)
gebco2 <- stars::st_mosaic(gebc0, gebc1)
x11(); plot(gebco2)
gebco <- stars::st_mosaic(gebc0, gebc1)
gebco
